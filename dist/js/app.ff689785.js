(function(){var t={3206:function(t,e,n){"use strict";var s=n(144),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",[e("b-navbar",{attrs:{toggleable:"sm",type:"dark",variant:"dark"}},[e("b-navbar-brand",{attrs:{to:"/"}},[t._v("Music shop")]),e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",[e("b-nav-item",{attrs:{to:"/"}},[t._v("Home")]),e("b-nav-item-dropdown",{attrs:{text:"Category",right:""}},[e("b-dropdown-item",{attrs:{to:"/instruments"}},[t._v("Instruments")])],1),e("b-nav-item",{staticClass:"Shop",attrs:{to:"/shop"}},[t._v("Shop")])],1),e("div",{staticClass:"buttonSettings"},[this.loggedIn?t._e():e("b-button",{attrs:{variant:"outline-success"},on:{click:function(e){return t.redirectToLogin()}}},[t._v("Log in")])],1),e("div",{staticClass:"buttonSettings"},[this.loggedIn?t._e():e("b-button",{staticClass:"me-3",attrs:{variant:"outline-primary"},on:{click:function(e){return t.redirectToRegister()}}},[t._v("Register")])],1),e("div",{staticClass:"buttonSettings"},[this.loggedIn?e("b-button",{staticClass:"ms-3",attrs:{variant:"outline-danger"},on:{click:function(e){return t.log_out()}}},[t._v("Log out")]):t._e()],1)],1)],1)],1),e("router-view")],1)},a=[],o=(n(7658),n(629)),i={name:"App",components:{},data(){return{}},computed:{...(0,o.rn)(["token","user","loggedIn"])},mounted(){this.logged=!1,localStorage.token&&this.setToken(localStorage.token)},methods:{...(0,o.nv)(["login","logout"]),...(0,o.OI)(["setToken"]),log_out(){this.logout(),console.log("radim log out"),this.$router.push({name:"Login"})},redirectToLogin(){this.$router.push({name:"Login"})},redirectToRegister(){this.$router.push({name:"Register"})}}},l=i,u=n(1001),m=(0,u.Z)(l,r,a,!1,null,null,null),c=m.exports,d=n(5205);(0,d.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var h=n(8345),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Header",{attrs:{subtitle:"Home Page"}}),e("img",{attrs:{alt:"Vue logo",src:"https://cdn.shopify.com/s/files/1/0147/1256/9910/files/DanvilleMusicStore_DisplayRoom7979_Retouched.jpg?v=1658169027&width=1500"}})],1)},b=[],f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"naslov"},[t._m(0),e("h3",{staticClass:"subtitle"},[t._v(t._s(t.subtitle))]),e("br")])},v=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"nine"},[e("h1",[t._v("Cvele Music Shop"),e("span",[t._v("Our music, your melody")])])])}],g={name:"Header",props:{subtitle:String}},I=g,_=(0,u.Z)(I,f,v,!1,null,"4be59e7d",null),k=_.exports,w={name:"HomeView",components:{Header:k}},y=w,S=(0,u.Z)(y,p,b,!1,null,null,null),C=S.exports,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Header",{attrs:{subtitle:"Owned Instruments"}}),e("InstrumentImageList")],1)},O=[],H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table"},[e("b-table",{attrs:{items:this.myInstruments,bordered:"",stripped:"",small:"",fixed:"",hover:""},on:{"row-clicked":t.rowClicked}})],1)},$=[],T={name:"InstrumentImageList",computed:{...(0,o.rn)(["instruments"])},data(){return{myInstruments:[]}},mounted(){if(localStorage.token){this.fetchInstruments(),this.myInstruments=[];for(var t=0;t<this.instruments.length;t++){var e={name:this.instruments[t].name,brand:this.instruments[t].brand};this.myInstruments.push(e)}}},watch:{instruments(t){if(localStorage.token){this.myInstruments=[];for(var e=0;e<t.length;e++){var n={name:t[e].name,brand:t[e].brand};this.myInstruments.push(n)}}}},methods:{...(0,o.nv)(["fetchInstruments"]),rowClicked(t,e){this.$router.push({name:"SingleInstrument",params:{name:t.name}})}}},j=T,A=(0,u.Z)(j,H,$,!1,null,"09463792",null),R=A.exports,q={name:"InstrumentView",components:{Header:k,InstrumentImageList:R}},L=q,P=(0,u.Z)(L,x,O,!1,null,null,null),Z=P.exports,E=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header",{attrs:{subtitle:"Create account"}}),e("b-form",{on:{submit:t.onSubmit}},[e("b-form-group",{attrs:{label:"Email address:","label-for":"email"}},[e("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),e("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[e("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("b-form-group",{attrs:{label:"Role:","label-for":"role"}},[e("b-form-input",{attrs:{id:"role",placeholder:"Enter role (user, admin, moderator)",required:""},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}})],1),e("br"),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},U=[],N={name:"Register",components:{Header:k},data(){return{form:{email:"",name:"",password:"",role:""}}},methods:{...(0,o.nv)(["register"]),onSubmit(t){t.preventDefault(),this.register(this.form),this.$router.push({name:"Home"})}}},M=N,V=(0,u.Z)(M,E,U,!1,null,"86650802",null),D=V.exports,J=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header",{attrs:{subtitle:"Log In"}}),e("b-form",{on:{submit:t.onSubmit}},[e("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[e("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",placeholder:"Password",type:"password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},z=[],B={name:"Login",components:{Header:k},data(){return{form:{name:"",password:""}}},methods:{...(0,o.nv)(["login"]),onSubmit(t){t.preventDefault(),this.login(this.form),this.$router.push({name:"Home"})}}},F=B,G=(0,u.Z)(F,J,z,!1,null,"1d63ee8a",null),X=G.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Header",{attrs:{subtitle:t.subtitle}}),t.imageUrl.length>0?e("img",{staticClass:"image",attrs:{src:t.imageUrl}}):e("h1",[t._v(" Error loading image ")])],1)},Q=[],W={name:"SingleInstrumentView",components:{Header:k,InstrumentImageList:R},computed:{...(0,o.rn)(["instruments"])},data(){return{imageUrl:"",subtitle:"Unknown"}},methods:{...(0,o.nv)(["fetchInstruments"])},mounted(){this.fetchInstruments();var t=this.$route.params.name;this.subtitle=t;for(var e=0;e<this.instruments.length;e++)this.instruments[e].name===t&&(this.imageUrl=this.instruments[e].url)},watch:{}},Y=W,tt=(0,u.Z)(Y,K,Q,!1,null,"44dcb00c",null),et=tt.exports,nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Header",{attrs:{subtitle:"Available instruments in shop"}}),e("ShopImageList")],1)},st=[],rt=function(){var t=this,e=t._self._c;return e("div",[e("b-table",{attrs:{items:this.myInstruments,small:"",fixed:"",hover:"",dark:"",bordered:"",stripped:""},on:{"row-clicked":t.rowClicked}})],1)},at=[],ot={name:"ShopImageList",computed:{...(0,o.rn)(["availableInstruments"])},data(){return{myInstruments:[]}},mounted(){if(localStorage.token){this.fetchAvailableInstruments(),this.myInstruments=[];for(var t=0;t<this.availableInstruments.length;t++){var e={name:this.availableInstruments[t].name,brand:this.availableInstruments[t].brand};this.myInstruments.push(e)}}},watch:{availableInstruments(t){this.myInstruments=[];for(var e=0;e<t.length;e++){var n={name:t[e].name,brand:t[e].brand};this.myInstruments.push(n)}}},methods:{...(0,o.nv)(["fetchAvailableInstruments"]),rowClicked(t,e){this.$router.push({name:"SingleShop",params:{name:t.name}})}}},it=ot,lt=(0,u.Z)(it,rt,at,!1,null,"02ccf244",null),ut=lt.exports,mt={name:"ShopView",components:{Header:k,ShopImageList:ut}},ct=mt,dt=(0,u.Z)(ct,nt,st,!1,null,null,null),ht=dt.exports,pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Header",{attrs:{subtitle:t.subtitle}}),e("div",{staticClass:"image"},[t.imageUrl.length>0?e("img",{staticClass:"inside-image",attrs:{src:t.imageUrl}}):e("h1",[t._v(" Error loading image ")])]),e("body",[e("div",{staticClass:"Cart-Container"},[t._m(0),e("div",{staticClass:"Cart-Items"},[e("div",{staticClass:"image-box"},[e("img",{staticStyle:{height:"180px",width:"auto"},attrs:{src:this.imageUrl}})]),e("div",{staticClass:"about"},[e("h1",{staticClass:"title"},[t._v(t._s(this.subtitle)+" ")]),e("h1",{staticClass:"description"},[t._v(" "+t._s(this.description)+" ")])]),e("div",{staticClass:"counter"}),e("div",{staticClass:"prices"})]),e("div",{staticClass:"price"},[e("h1",[t._v(" Price: "+t._s(this.price)+"$")]),e("b-button",{staticClass:"button",attrs:{type:"submit",squared:"",variant:"outline-info"},on:{click:function(e){return t.buttonClicked()}}},[t._v("Order")])],1)])])],1)},bt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"Header"},[e("h3",{staticClass:"Heading"},[t._v("Order instrument")])])}],ft={name:"SingleShopView",components:{Header:k},computed:{...(0,o.rn)(["availableInstruments","instruments","token"])},data(){return{imageUrl:"",brand:"",price:0,description:"",subtitle:"Unknown"}},methods:{...(0,o.nv)(["fetchAvailableInstruments","addInstrument","deleteAvailableInstrument"]),buttonClicked(){for(var t=null,e=this.$route.params.name,n=0;n<this.availableInstruments.length;n++)this.availableInstruments[n].name===e&&(t=this.availableInstruments[n]);null!==t&&(this.$socket.emit("available",{name:t.name,brand:t.brand,url:t.url,token:this.token}),this.$socket.emit("instrument",{name:t.name,brand:t.brand,url:t.url,token:this.token}),this.$router.push({name:"Shop"}))}},mounted(){this.fetchAvailableInstruments();var t=this.$route.params.name;this.subtitle=t;for(var e=0;e<this.availableInstruments.length;e++)this.availableInstruments[e].name===t&&(this.imageUrl=this.availableInstruments[e].url,this.price=this.availableInstruments[e].price,this.brand=this.availableInstruments[e].brand,this.description=this.availableInstruments[e].description)},watch:{}},vt=ft,gt=(0,u.Z)(vt,pt,bt,!1,null,"109dde5b",null),It=gt.exports;s["default"].use(h.ZP);const _t=[{path:"/",name:"Home",meta:{authRequired:!1},component:C},{path:"/instruments",name:"Instruments",meta:{authRequired:!0},component:Z},{path:"/singleInstrument/:name",name:"SingleInstrument",meta:{authRequired:!0},component:et},{path:"/login",name:"Login",meta:{authRequired:!1},component:X},{path:"/register",name:"Register",meta:{authRequired:!1},component:D},{path:"/shop",name:"Shop",meta:{authRequired:!0},component:ht},{path:"/singleShop/:name",name:"SingleShop",meta:{authRequired:!0},component:It}],kt=new h.ZP({mode:"history",base:"/",routes:_t});kt.beforeEach(((t,e,n)=>{if(t.meta.authRequired){const t=localStorage.getItem("token");if(null==t)return void n("/login")}n()}));var wt=kt,yt=n(4702);s["default"].use(o.ZP);var St=new o.ZP.Store({plugins:[(0,yt.Z)({storage:window.sessionStorage})],state:{instruments:[],token:"",user:null,loggedIn:!1,availableInstruments:[]},mutations:{login(t,e){t.user=e,t.loggedIn=!0},log_out(t){t.user=null,t.loggedIn=!1,t.token="",localStorage.token="",sessionStorage.clear()},setToken(t,e){t.token=e,localStorage.token=e},setInstruments(t,e){t.instruments=e},setAvailableInstruments(t,e){t.availableInstruments=e},deleteAvailableInstrument(t,e){for(var n=[],s=0;s<t.availableInstruments.length;s++)t.availableInstruments[s].name===e.name&&t.availableInstruments[s].brand===e.brand||n.push(t.availableInstruments[s]);t.availableInstruments=n},addInstrument(t,e){t.instruments.push(e)}},actions:{register({commit:t},e){fetch("/auth-register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((n=>{if(n.msg)alert(n.msg);else{t("setToken",n.token);let s={name:e.name,password:e.password};t("login",s)}}))},login({commit:t},e){fetch("/auth-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((n=>{n.msg?alert(n.msg):(t("setToken",n.token),n.token&&t("login",e))}))},fetchInstruments({commit:t,state:e}){fetch("/admin/instruments",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`}}).then((t=>t.json())).then((e=>{e.msg?alert(e.msg):t("setInstruments",e)}))},fetchAvailableInstruments({commit:t,state:e}){fetch("/admin/availableInstruments",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`}}).then((t=>t.json())).then((e=>{e.msg?alert(e.msg):t("setAvailableInstruments",e)}))},logout({commit:t}){t("log_out")},socket_instrument({commit:t},e){const n=JSON.parse(e);t("addInstrument",n)},socket_available({commit:t},e){const n=JSON.parse(e);t("deleteAvailableInstrument",n)}}}),Ct=n(3386),xt=n(6676),Ot=n(1369),Ht=n.n(Ot),$t=n(9923),Tt=n.n($t);n(5765);const jt=Tt()("https://musicshop-3jgh.onrender.com");s["default"].use(Ct.XG7),s["default"].use(xt.A7),s["default"].use(new(Ht())({debug:!1,connection:jt,vuex:{store:St,actionPrefix:"socket_"}})),s["default"].config.productionTip=!1,new s["default"]({router:wt,store:St,render:t=>t(c)}).$mount("#app")},7101:function(){}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,s,r,a){if(!s){var o=1/0;for(m=0;m<t.length;m++){s=t[m][0],r=t[m][1],a=t[m][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((function(t){return n.O[t](s[l])}))?s.splice(l--,1):(i=!1,a<o&&(o=a));if(i){t.splice(m--,1);var u=r();void 0!==u&&(e=u)}}return e}a=a||0;for(var m=t.length;m>0&&t[m-1][2]>a;m--)t[m]=t[m-1];t[m]=[s,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,a,o=s[0],i=s[1],l=s[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(l)var m=l(n)}for(e&&e(s);u<o.length;u++)a=o[u],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(m)},s=self["webpackChunkmusicshop"]=self["webpackChunkmusicshop"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(3206)}));s=n.O(s)})();
//# sourceMappingURL=app.ff689785.js.map